{% extends "base.html" %}
{% block content %}
    <h2>ğŸ’¼ æ¥æ¡ˆäººå„€è¡¨æ¿</h2>
    <p>æ‚¨å¥½ï¼Œ{{ current_user.username }}ã€‚åœ¨é€™è£¡æ‚¨å¯ä»¥æŸ¥çœ‹ä¸¦ç®¡ç†æ‚¨åƒèˆ‡çš„å°ˆæ¡ˆã€‚</p>

    <hr>
    
    <h3>ğŸ”¥ æ­£åœ¨é€²è¡Œä¸­å°ˆæ¡ˆ (å…± {{ in_progress_projects | length }} å€‹)</h3>
    {% if in_progress_projects %}
        <table>
            <tr>
                <th>å°ˆæ¡ˆæ¨™é¡Œ</th>
                <th>ç‹€æ…‹</th>
                <th>å§”è¨—äºº</th>
                <th>æ“ä½œ</th>
            </tr>
            {% for project in in_progress_projects %}
            <tr>
                <td><a href="{{ url_for('project_detail', project_id=project.id) }}">{{ project.title }}</a></td>
                <td><span class="status-{{ project.status }}">{{ project.status }}</span></td>
                <td>{{ project.client.username }}</td>
                <td><a href="{{ url_for('project_detail', project_id=project.id) }}" class="btn btn-info">æŸ¥çœ‹/æäº¤çµæ¡ˆ</a></td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>ç›®å‰æ²’æœ‰æ­£åœ¨æ‰¿åŒ…çš„é€²è¡Œä¸­å°ˆæ¡ˆã€‚</p>
    {% endif %}
    
    <hr>

    <h3>ğŸ” å¾…æ¥æ¡ˆå°ˆæ¡ˆåˆ—è¡¨ (å…± {{ open_projects | length }} å€‹)</h3>
    {% if open_projects %}
        <table>
            <tr>
                <th>å°ˆæ¡ˆæ¨™é¡Œ</th>
                <th>ç™¼å¸ƒæ™‚é–“</th>
                <th>å§”è¨—äºº</th>
                <th>æ“ä½œ</th>
            </tr>
            {% for project in open_projects %}
            <tr>
                <td>{{ project.title }}</td>
                <td>{{ project.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>{{ project.client.username }}</td>
                <td><a href="{{ url_for('project_detail', project_id=project.id) }}" class="btn btn-info">æŸ¥çœ‹è©³æƒ…/å ±åƒ¹</a></td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>ç›®å‰æ²’æœ‰å…¬é–‹æ‹›å‹Ÿçš„å°ˆæ¡ˆã€‚</p>
    {% endif %}
    
    <hr>
    
    <h3>ğŸ“œ æ­·å²å°ˆæ¡ˆ (å·²çµæ¡ˆ/å·²æ‹’çµ•, å…± {{ historical_projects | length }} å€‹)</h3>
    {% if historical_projects %}
        <table>
            <tr>
                <th>å°ˆæ¡ˆæ¨™é¡Œ</th>
                <th>ç‹€æ…‹</th>
                <th>å§”è¨—äºº</th>
                <th>æ“ä½œ</th>
            </tr>
            {% for project in historical_projects %}
            <tr>
                <td>{{ project.title }}</td>
                <td><span class="status-{{ project.status }}">{{ project.status }}</span></td>
                <td>{{ project.client.username }}</td>
                <td><a href="{{ url_for('project_detail', project_id=project.id) }}" class="btn btn-info">æŸ¥çœ‹è©³æƒ…</a></td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>ç›®å‰æ²’æœ‰å·²çµæ¡ˆæˆ–è¢«æ‹’çµ•çš„æ­·å²å°ˆæ¡ˆã€‚</p>
    {% endif %}
{% endblock %}